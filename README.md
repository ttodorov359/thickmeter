# thickmeter

Original: http://dolina-s.ru/blog/page/izmeritel-tolshhiny-lkp-na-arduino

Thick Meter

В процессе поиска, подходящего для меня автомобиля с пробегом, столкнулся с необходимостью проверки лакорасочного покрытия (ЛКП) на однородность, для выявления крашеных или шпаклеваных деталей. Сначала в руки мне попал профессиональный измеритель толщины ЛКП, но давали мне его ненадолго, а процесс поиска машины, наоборот, растянут по времени. Измеритель пришлось вернуть владельцу, а подходящая машина найдена не была.
А нельзя ли сделать простейший измеритель толщины краски самому?
Первым результатом поиска по интернету, стала классическая схема, на основе двухобмоточного трансформатора с открытой магнитной системой.

<img src="https://raw.githubusercontent.com/ttodorov359/thickmeter/docs/1.png" />

На первичную обмотку подается некий сигнал, а со вторичной обмотки подается сигнал на измеритель. Измеряемый образец, замыкает магнитную систему и чем толще краска, тем меньше связь между обмотками, тем меньше выходной сигнал. Но искать подходящее железо для трансформатора и мотать его было лень, продолжил поиски. Кроме этого подобные схемы имеют сильную нелинейность зависимости уровня сигнала от толщины покрытия.
Затем попалась схема, которя работает на основе изменения индуктивного сопротивления датчика. На измерительную катушку подается калиброваный сигнал (лучше синусоидальный) , катушка включена в плечо измерительного моста, после установки нуля, проводится измерение.




А нельзя ли еще проще? Ход мыслей примерно такой: "если датчик - это индуктивность, значит нужно устройство измерения индуктивности"

Еще я вспомнил, что у меня валяется несколько плат Arduino. Брал пару лет назад поиграться.
Сформулировал, для себя, задачу - "Измерение индуктивности на Arduino минимумом навесных деталей".
В результате поисков, наткнулся на страницу https://github.com/sae/Arduino-LCQmeter/blob/master/LC-gen.ino
эта программа и стала прототипом простейшего измерителя ЛКП.
В качестве основной платы, выбрана Arduino nano за небольшие габариты.
Суть работы в следующем: на измеряемый LC-контур подается импульс "накачки", после чего запускается счетчик до до тех пор, пока сигнал на контуре, не пройдет через "0" компаратора, после чего процесс повторяется.
В результате, показания счетчика пропорциональны резонансной частоте LC контура.
Сначала опробовал идею на столе, с выводом информации на компьютер. Вроде работает
Хотя у меня был LCD модуль, но с ним устройство получалось громоздким и требовало изготовления корпуса.
Решил сделать индикацию толщины на светодиодах.
Нарисовал схему, спаял шилд на макетке, предусмотрел контроль напряжения батареи.

Схема толщиномера
Проблемой оказалось изготовление катушки. Если чашек ферритовых броневых сердечников нашел много и разных, то каркасов катушек не нашел ни одного. После нескольких попыток сделать каркас самостоятельно, было найдено следующее решение: на коническом корпусе шариковой ручки были установлены две картонные щечки, намотано приблизительно подходящеее количество витков, чтоб поместилось внутрь сердечника. Провод взял минимальной толщины, какой был под рукой (около 0.08) количества витков не помню, что-то около 100. после намотки, одну щечку снял. и подталкивая за другую щечку поместил получившуюся катушку внутрь сердечника. Выпавшие витки, заправил в катушку пинцетом. После этого капнул на витки суперклеем и закрыл катушку оставшейтся щечкой. Катушку на плате закрепил термоклеем.
Конденсатор желательно металлопленочный, только не керамический, поскольку у керамики такой емкости недопустимый ТКЕ
В результате, получилась такая конструкция:





Текст программы для загрузки:  Скетч для Arduino.zip

Работа с устройством:
Поскольку разные машины имеют разную тощину ЛКП, сначала делается процедура калибровки. Кроме этого процедура калибровки, позволяет снизить влияние температуры на результаты измерения. Для калибровки, нужно прижать устройство к покрытию автомобиля, и нажать кнопку "калибровка"
После проведения калибровки, значение толщины ЛКП, выраженное в "условных единицах" записывается в eeprom.
для проведения измерения, прибор прикладывается к разным местам ЛКП автомобиля и нажимается кнопка "Измерение". Если отклонение измеренного результата от записанного, невелико, загорается зеленый светодиод.
Если отклонение превышает некоторую границу - загорается белый светодиод - "подозрительно"
Если есть второй слой краски, или была полировка - загорается один из синих "краска" или "полировка"
Если покрытие близко к нулю или превышает 0.2, то загораются красные светодиоды "шпаклевка" или "металл"
Каждое измерение толщины производится 3 раза, а потом значение усредняется. Возможно, одного раза достаточно. Это позволит получать результат практически мгновенно.

Не стоит рассматривать эту поделку, как образец готового изделия. Это всего лишь пример того, как можно решить поставленную задачу "подручными" средствами. Но, подозреваю, что на основе этого измерителя, можно изготовить измеритель с профессиональной точностью. Для этого нужно будет, качественно намотать катушку, подобрать конденсатор, с минимальным TKE, подключить экранный модуль, подобрать формулу пересчета "сырого" значения в микрометры.

Борис Падорин, ООО "Долина-Сервис"
